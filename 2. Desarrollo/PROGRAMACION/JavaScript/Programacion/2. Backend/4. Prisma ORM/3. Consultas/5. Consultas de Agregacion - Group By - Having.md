
---

## Funciones de Agregacion:

| **MÃ©todo de AgregaciÃ³n** | **DescripciÃ³n**                                                        | **Ejemplo**                                                                                                                       |
| ------------------------ | ---------------------------------------------------------------------- | --------------------------------------------------------------------------------------------------------------------------------- |
| **`_count`**             | Cuenta el nÃºmero de registros en cada grupo.                           | ```typescript<br>const result = await prisma.product.groupBy({<br>  by: ['categoryId'],<br>  _count: { id: true }<br>});<br>```   |
| **`_sum`**               | Suma los valores de un campo numÃ©rico en cada grupo.                   | ```typescript<br>const result = await prisma.product.groupBy({<br>  by: ['categoryId'],<br>  _sum: { price: true }<br>});<br>```  |
| **`_avg`**               | Calcula el promedio de un campo numÃ©rico en cada grupo.                | ```typescript<br>const result = await prisma.product.groupBy({<br>  by: ['categoryId'],<br>  _avg: { price: true }<br>});<br>```  |
| **`_min`**               | Encuentra el valor mÃ­nimo de un campo numÃ©rico en cada grupo.          | ```typescript<br>const result = await prisma.product.groupBy({<br>  by: ['categoryId'],<br>  _min: { price: true }<br>});<br>```  |
| **`_max`**               | Encuentra el valor mÃ¡ximo de un campo numÃ©rico en cada grupo.          | ```typescript<br>const result = await prisma.product.groupBy({<br>  by: ['categoryId'],<br>  _max: { price: true }<br>});<br>```  |
| **`_first`**             | Obtiene el primer valor de un campo (en orden de grupo) en cada grupo. | ```typescript<br>const result = await prisma.product.groupBy({<br>  by: ['categoryId'],<br>  _first: { name: true }<br>});<br>``` |
| **`_last`**              | Obtiene el Ãºltimo valor de un campo (en orden de grupo) en cada grupo. | ```typescript<br>const result = await prisma.product.groupBy({<br>  by: ['categoryId'],<br>  _last: { name: true }<br>});<br>```  |

## Group By:

```typescript
async AgruparPor(id: number){


    await this.prisma.products.groupBy({
        
        // Agrupacion por ðŸ‘‡
        by: ['categoryId'],


        // Funciones de agregacion: Sum, count, etc: ðŸ‘ˆ
        _count: {

            //Contar por: ðŸ‘ˆ
            id: true,
        }

    });
}

```

## Group By y Having:

```typescript

async GroupProductsById(){

    const groupedProducts = await this.prisma.products.groupBy({
		//Agrupar por: ðŸ‘‡
        by: ['categoryId'],

		// Funciones de agregacion ðŸ‘‡
        _count: {
            id: true,
        },

		// Filtro de Gruup by
        having: {
            _count: {
                id: {
                    gt: 5, // Filtra categorÃ­as con mÃ¡s de 5 productos ðŸ‘ˆ
                },
            },
        },
    });

    return groupedProducts;

}
```

