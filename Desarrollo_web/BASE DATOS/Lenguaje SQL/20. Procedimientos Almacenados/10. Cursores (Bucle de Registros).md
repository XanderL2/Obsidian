
---
## Â¿Que son los cursores?
Son estructuras que te permiten recorrer registro a registro una tabla, ahi podemos guardar una consulta SELECT e ir recorriendo registro a registro con ayuda de un while. 


**Puntos a tener en cuenta:**
- Tiene casos puntuales de uso pero se recomienda evitarlos siempre porque puede tener problemas de rendimiento.
- Permiten solo la lectura de registros uno a uno, y no podremos modificar los registros dentro del cursor.
- Son de acceso secuencial, osea que van registro por registro.
- Deberemos declarar un handler, para que evitar un error NOT FOUND y pueda salir cuando ya no quedan mas registros. Aunque podemos hallar el estado para validar y no suceda esto tambien.
- Las variables que queremos que guarden los datos deben ser del mismo tipo que los  que estan en la tabla.
- Las operaciones se hacen meramente dentro del while, ya que seria de esta forma estamos accediendo a cada fila. 
- Se lee la primera fila para que la condicion del while pueda ser verdadera y pase por el bucle, de no ser asi no pasa por el bucle
 

## Sintaxis:
Otra forma de validar que siga leyendo los registros durante cada fila es con FETCH, el cual ira devolviendo 0 siempre y cuando exista informacion por leer, debido a esto no es necesario usar el handler si se hace de esta manera.


```sql
    -- Variables a usar
    DECLARE gama, TotalIngresos VARCHAR(255);

	-- Le decimos que el cursor recorrera cada fila de la tabla: 
    DECLARE cursorFila CURSOR FOR 
        SELECT gama, TotalIngresos FROM IngresosPorGama;

	-- Declaramos una sentencia Handler para parar el codigo mas adelante
    DECLARE CONTINUE HANDLER FOR NOT FOUND 
        LEAVE loop_cursor;

	-- Abrimos el cursor
    OPEN cursorFila;
	
    
    loop_cursor: LOOP
    
    	-- Si las filas de la tabla Terminan sale del LOOP con un LEAVE
        FETCH cursorFila INTO gama, TotalIngresos;
        IF done THEN LEAVE loop_cursor; END IF;
        
    	-- Aqui va todo lo que queremos hacer con cada registro    
        
        SELECT gama, TotalIngresos;
        
        
    -- Cerramos el LOOP y el cursor
    END LOOP loop_cursor;
    CLOSE cursorFila;;

```




















































